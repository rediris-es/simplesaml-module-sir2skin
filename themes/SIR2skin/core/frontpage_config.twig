{% set pagetitle =  '{core:frontpage:page_title}' | trans %}
{% extends "base.twig" %}
{% block content %}

<div id="portalmenu" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
 	<ul class="tabset_tabs ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
        <li class="ui-state-default ui-corner-top"><a href="{{baseurlpath}}/module.php/core/frontpage_welcome.php">Welcome</a></li>
        <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#">Configuration</a></li>
        <li class="ui-state-default ui-corner-top"><a href="{{baseurlpath}}/module.php/core/frontpage_auth.php">Authentication</a></li>
        <li class="ui-state-default ui-corner-top"><a href="{{baseurlpath}}/module.php/core/frontpage_federation.php">Federation</a></li>
    </ul>
    <div id="portalcontent" class="ui-tabs-panel ui-widget-content ui-corner-bottom">

        {% if isadmin is not null %}
			<p class="float-r youareadmin">{% trans '{core:frontpage:loggedin_as_admin}' %}</p>
		{% else %}
			<p class="float-r youareadmin"><a href="{{loginurl}}">{% trans '{core:frontpage:login_as_admin}' %}</a></p>
		{% endif %}

		<div style="margin-top: 1em;">
			<code style="background: white; background: #f5f5f5; border: 1px dotted #bbb; padding: 1em;  color: #555" >
				{{directory}} ({{version}})
			</code>
		</div>



<div style="clear: both" class="enablebox mini">

	<table>
	
		{% set icon_enabled = 'accept.png' %}
		{% set icon_disabled = 'delete.png' %}

		{% set alt_enabled = 'enabled.png' %}
		{% set alt_disabled = 'disabled.png' %}

		{% if enablematrix['saml20-idp'] == true %}
			{% set class_saml20 = 'enabled' %}
		{% else %}
			{% set class_saml20 = 'disabled' %}
		{% endif %}

		{% if enablematrix['shib13-idp'] == true %}
			{% set class_shib13 = 'enabled' %}
		{% else %}
			{% set class_shib13 = 'disabled' %}
		{% endif %}
	
		<tr class="{{class_saml20}}"><td>SAML 2.0 IdP</td>
			<td>
				{% if enablematrix['saml20-idp'] == true %}
					<img src="{{baseurlpath}}/resources/icons/silk/{{icon_enabled}}" alt="{{alt_enabled}}" />
				{% else %}
					<img src="{{baseurlpath}}/resources/icons/silk/{{icon_disabled}}" alt="{{alt_disabled}}" />
				{% endif %}
			</td>
		</tr>
			
		<tr class="{{class_shib13}}"><td>Shib 1.3 IdP</td>
			<td>
				{% if enablematrix['shib13-idp'] == true %}
					<img src="{{baseurlpath}}/resources/icons/silk/{{icon_enabled}}" alt="{{alt_enabled}}" />
				{% else %}
					<img src="{{baseurlpath}}/resources/icons/silk/{{icon_disabled}}" alt="{{alt_disabled}}" />
				{% endif %}
			</td>
		</tr>
		
	</table>
</div>


<h2>{% trans '{core:frontpage:configuration}' %}</h2>

<ul>

	{% for key, link in links_config %}
		<li><a href="{{link.href | e}}">{{ (link.text)|trans | raw}}</a></li>
	{% endfor %}	

</ul>


{% if warnings is not null %}
	{% for key, warning in warnings %}
		<div class="caution">{{ (warning)|trans | raw}}</div>
	{% endfor %}	
{% endif %}

{% if isadmin is not null %}
	<h2>{% trans '{core:frontpage:checkphp}' %}</h2>
	<div class="enablebox">
		<table>
			{% for key, func in funcmatrix %}

				{% if func.enabled == 'enabled' %}
					{% set class_func = 'enabled' %}
				{% else %}
					{% set class_func = 'disabled' %}
				{% endif %}

				<tr class="{{class_func}}">

					<td>
						{% if func.enabled == 'enabled' %}
							<img src="{{baseurlpath}}/resources/icons/silk/{{icon_enabled}}" alt="{{alt_enabled}}" />
						{% else %}
							<img src="{{baseurlpath}}/resources/icons/silk/{{icon_disabled}}" alt="{{alt_disabled}}" />
						{% endif %}
					</td>
					<td>
						{% set keyString = func.required %}
						{{ (requiredmap[keyString])|trans | raw}}
						
					</td>
					<td>{{func.descr}}</td>

				</tr>
			{% endfor %}
		</table>
	</div>
{% endif %}

</div>
	
{% endblock content %}
